<!DOCTYPE html>
<html lang="en" manifest="manifest.appcache">
<head>
    <meta charset="UTF-8">


    <title>Moodler 1.5</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- <script src="./src/moodler_bootstrap.js" type="application/javascript"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gojs/1.7.8/go-debug.js"></script>
    <script src="src/templates/templates.js"></script>
    <script src="src/moodler/moodler.js"></script>
    <script>

        function setupforms(){

        }

        $(function () {
            moodler.init();
            var accessoryEntity = {
                name: "Accessory",
                properties: [{
                    propertyName: "type",
                    propertyType: "String"
                }, {
                    propertyName: "Description",
                    propertyType: "String"
                }]
            };
            var phoneEntity = {
                name: "Phone",
                properties: [{
                    propertyName: "brand",
                    propertyType: "String"
                }, {
                    propertyName: "price",
                    propertyType: "Decimal"
                }]
            };
            moodler.addEntity(accessoryEntity, 0, 0);
            moodler.addEntity(phoneEntity, 500, 75);

            var linkData = {
                source: diagram.findNodeForKey("Phone"),
                target: diagram.findNodeForKey("Accessory"),
                name: "contains",
                sourceRole: "KK",
                targetRole: "pp",
                sourceMultiplicity: "1..*",
                targetMultiplicity: "1..*"
            };
            moodler.addRelationship(linkData, 350, 0);

            var personEntity = {
                name: "Person",
                properties: [{propertyName: "name", propertyType: "String"},
                    {propertyName: "lastName", propertyType: "String"},
                    {propertyName: "email", propertyType: "String"},
                    {propertyName: "dateOfBirth", propertyType: "Date"}
                ]
            };
            var childEntity = {
                name: "Child",
                properties: [{propertyName: "twitch", propertyType: "String"},
                    {propertyName: "likesDisneyFilms", propertyType: "boolean"},
                    {propertyName: "likesVegetables", propertyType: "boolean"}
                ]
            };
            var adultEntity = {
                name: "Adult",
                properties: [{propertyName: "last.fm", propertyType: "String"},
                    {propertyName: "usesSpotify", propertyType: "boolean"},
                    {propertyName: "likestoCook", propertyType: "boolean"}
                ]
            };
            moodler.addEntity(personEntity,150,50);
            moodler.addEntity(childEntity,0,300);
            moodler.addEntity(adultEntity,250,300);

            var gsData = {
                parent: diagram.findNodeForKey("Person"),
                children: [diagram.findNodeForKey("Child"), diagram.findNodeForKey("Adult")],
                isPartial: false,
                isDisjoint: true
            };
            moodler.addGeneralizationSpecialization(gsData,200,200)


        })

    </script>
    <style>
        #moodlerDIV {
            width: 95%;
            height: 95%;
            min-height: 600px;
            background-color: #DDD;
            resize: both;
            overflow: auto;
        }
    </style>
</head>
<body>

<div class="modal" id="entityForm" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-header">
            <h2>Entitätstyp</h2>
            <a href="#" class="btn-close" aria-hidden="true">×</a>
        </div>
        <div class="modal-body">
            <p>One modal example here! :D</p>
        </div>
        <div class="modal-footer">
            <a href="#" class="btn">Nice!</a>
        </div>
    </div>
</div>

<div id="moodlerDIV"></div>

<div id="" title="Entity Type">
    <form>
        <input type="hidden" id="entityId" class="entityId" value="">

        <p>
            <label for="entityName">Name</label>
            <input type="text" name="entityName" id="entityName" placeholder="Name"
                   class="entityName text ui-widget-content ui-corner-all" required="required">
        </p>
        <p class="cloneable">
            <label for="attribute">Attribute(s)</label>
            <input pattern=".{2,}:.{2,}" name="attribute" id="attribute"
                   class="entityAttribute text text ui-widget-content ui-corner-all" type="text"
                   placeholder="Name des Attributs : Attributstyp" title="Name">
            <span>
                            <i tabindex="0" class="fa fa-plus-square add" aria-hidden="true" title="Noch Einer"></i>
                            <i tabindex="0" class="fa fa-minus-square remove" aria-hidden="true" title="Entfernen"></i>
                        </span>
        </p>
        <p style="display:none;"><input type="submit" tabindex="-1"></p>
    </form>
</div>

<div id="relationshipForm"  title="Beziehungstyp">
    <form>
        <input type="hidden" id="relationshipId" class="relationshipId" value="">
        <p>
            <label for="relationshipName">Name des Beziehungstyps</label>
            <input type="text" name="entityName" id="relationshipName" placeholder="Name"
                   class="relationshipName text ui-widget-content ui-corner-all" required="required">
        </p>

        <p>
            <label for="entity1">1. Entitätstyp</label>
            <select id="entity1" class="entityList" data-placeholder="Entitätstyp wählen" required></select>
            <input type="text" id="cardinality1" title="Kardinalität" placeholder="1..*" required
                   pattern="[\d+|\*|\+]\.\.[\d+|\*|\+]">
            <input type="text" id="role1" title="Rolle" placeholder="Rolle" />
        </p>
        <p>
            <label for="entity2">2. Entitätstyp</label>
            <select id="entity2" class="entityList" data-placeholder="Entitätstyp wählen" required></select>
            <input type="text" id="cardinality2" title="Kardinalität" placeholder="1..*" required
                   pattern="[\d+|\*|\+]\.\.[\d+|\*|\+]">
            <input type="text" id="role2" title="Rolle" placeholder="Rolle" />
        </p>

        <p style="display:none;"></p>
    </form>
</div>

<div id="generalizationSpecializationForm" title="Generalisierung Spezialisierung">
    <form>
        <p>
            <input type="hidden" id="id" class="id" value="">
        <p>
            <label for="supertype">Supertyp</label>
            <select id="supertype" class="supertype entityList" data-placeholder="Entitätstyp wählen" required></select>
        </p>


        <p>
        <fieldset>
            <legend>Vollständigkeitsbedingung</legend>
            <label for="total">Total</label>
            <input type="radio" id="total" name="completeness" value="total" required />
            <label for="partial">Partiell</label>
            <input type="radio" id="partial" name="completeness" value="partial" />
        </fieldset>
        </p>

        <p>
        <fieldset>
            <legend>Exklusivitätsbedingung</legend>
            <label for="overlapping">Überlappend</label>
            <input type="radio" id="overlapping" name="disjoint" value="O" required />
            <label for="disjoint">Disjunkt</label>
            <input type="radio" id="disjoint" name="disjoint" value="D" />
        </fieldset>

        </p>

        <p>
            <label for="subtype">Subtyp</label>
            <select id="subtype" class="subtype entityList" data-placeholder="Entitätstyp wählen" multiple required></select>
        </p>


        <p style="display:none;"><input type="submit" tabindex="-1"></p>
    </form>
</div>

</body>
</html>