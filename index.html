<!DOCTYPE html>
<html lang="en" manifest="manifest.appcache">
<head>
    <meta charset="UTF-8">


    <title>Moodler 1.5</title>
    <link rel="stylesheet" href="css/moodler.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- <script src="./src/moodler_bootstrap.js" type="application/javascript"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gojs/1.7.8/go-debug.js"></script>
    <script src="src/templates/templates.js"></script>
    <script src="src/moodler/moodler.js"></script>
    <script>

        function setupforms() {

        }

        function showEntityForm(inputEvent, node) {
            document.location = "#modal-entities"; //open entities form
            console.log("blah");
        }


        $(function () {
            moodler.init("moodler");
            var accessoryEntity = {
                name: "Accessory",
                properties: [{
                    propertyName: "type",
                    propertyType: "String"
                }, {
                    propertyName: "Description",
                    propertyType: "String"
                }]
            };
            var phoneEntity = {
                name: "Phone",
                properties: [{
                    propertyName: "brand",
                    propertyType: "String"
                }, {
                    propertyName: "price",
                    propertyType: "Decimal"
                }]
            };
            moodler.addEntity(accessoryEntity, 0, 0);
            moodler.addEntity(phoneEntity, 500, 75);

            var linkData = {
                source: diagram.findNodeForKey("Phone"),
                target: diagram.findNodeForKey("Accessory"),
                name: "contains",
                sourceRole: "KK",
                targetRole: "pp",
                sourceMultiplicity: "1..*",
                targetMultiplicity: "1..*"
            };
            moodler.addRelationship(linkData, 350, 0);

            var personEntity = {
                name: "Person",
                properties: [{propertyName: "name", propertyType: "String"},
                    {propertyName: "lastName", propertyType: "String"},
                    {propertyName: "email", propertyType: "String"},
                    {propertyName: "dateOfBirth", propertyType: "Date"}
                ]
            };
            var childEntity = {
                name: "Child",
                properties: [{propertyName: "twitch", propertyType: "String"},
                    {propertyName: "likesDisneyFilms", propertyType: "boolean"},
                    {propertyName: "likesVegetables", propertyType: "boolean"}
                ]
            };
            var adultEntity = {
                name: "Adult",
                properties: [{propertyName: "last.fm", propertyType: "String"},
                    {propertyName: "usesSpotify", propertyType: "boolean"},
                    {propertyName: "likestoCook", propertyType: "boolean"}
                ]
            };
            moodler.addEntity(personEntity, 150, 50);
            moodler.addEntity(childEntity, 0, 300);
            moodler.addEntity(adultEntity, 250, 300);

            var gsData = {
                parent: diagram.findNodeForKey("Person"),
                children: [diagram.findNodeForKey("Child"), diagram.findNodeForKey("Adult")],
                isPartial: false,
                isDisjoint: true
            };
            moodler.addGeneralizationSpecialization(gsData, 200, 200)


        })

    </script>
    <style>
    </style>
</head>
<body>

<div class="container">
    <div class="menu">
        <img class="action" id="load" src="images/open.png"/>
        <img class="action" id="save" src="images/save.png"/>
        <img class="action" id="print" src="images/printer.png"/>
        <input id="fileOpen" type="file" name="fileOpen" style="display: none;"/>
        <hr/>
        <p>&nbsp;</p>
        <img class="menuItem draggable" id="entity" src="images/entity.png"/><br/>
        <img class="menuItem draggable" id="relationship" src="images/relationship.png"/><br/>
        <img class="menuItem draggable" id="generalizationSpecialization"
             src="images/generalizationSpecialization.png"/><br/>
    </div>
    <div id="moodler">
    </div>
</div>
</body>
</html>